{% extends 'classification/base.html' %}

{% load filters %}

{% block title %}Classifier{% endblock %}
{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">Train or classify from a file</div>
            <div class="panel-body">
                <form action="{% url 'classification:index' %}" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="form-group">
                        <label class="control-label">Select File</label>
                        <input type="file" class="file" name="file" data-show-preview="false"
                               data-show-upload="false" required>
                    </div>
                    <div class="btn-group pull-right" role="group">
                        <button type="submit" class="btn btn-default" name="mode" value="train">Train</button>
                        <button type="submit" class="btn btn-default" name="mode" value="classify">Classify</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    {% if output %}
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">Output</div>
            <div class="panel-body">
                <p>
                    <a href="{{ output | data_uri:'text/csv' }}" target="_blank" class="btn btn-primary"
                       download="classified-repositories.csv">Download Classified Repositories</a>
                </p>
                <pre style="margin-bottom: 0">{{ output | escape }}</pre>
            </div>
        </div>
    </div>
    {% endif %}
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">Classify a single repo</div>
            <div class="panel-body">
                <form action="{% url 'classification:index' %}" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="form-group">
                        <label class="control-label">Repository URL</label>
                        <input type="text" class="form-control" name="repo-url" value="" required>
                    </div>
                    <div class="btn-group pull-right" role="group">
                        <button type="submit" class="btn btn-default" name="mode" value="classify-single-repo">Classify
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
